<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iDynTree: iDynTree::AttitudeMahonyFilter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iDynTree
   </div>
   <div id="projectbrief">Free floating robots dynamics library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classiDynTree_1_1AttitudeMahonyFilter.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classiDynTree_1_1AttitudeMahonyFilter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">iDynTree::AttitudeMahonyFilter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>explicit passive complementary filter on quaternion groups described in the paper <a href="https://hal.archives-ouvertes.fr/hal-00488376/document">Non-linear complementary filters on SO3 groups</a>  
 <a href="classiDynTree_1_1AttitudeMahonyFilter.html#details">More...</a></p>

<p><code>#include &lt;AttitudeMahonyFilter.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for iDynTree::AttitudeMahonyFilter:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classiDynTree_1_1AttitudeMahonyFilter__inherit__graph.svg" width="218" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for iDynTree::AttitudeMahonyFilter:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classiDynTree_1_1AttitudeMahonyFilter__coll__graph.svg" width="1270" height="195"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae2a22d925e2bfac7f4c3f6a91a3a1871"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#ae2a22d925e2bfac7f4c3f6a91a3a1871">AttitudeMahonyFilter</a> ()</td></tr>
<tr class="separator:ae2a22d925e2bfac7f4c3f6a91a3a1871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4722cd241bbe3990de91bd3a8f29138"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#af4722cd241bbe3990de91bd3a8f29138">useMagnetoMeterMeasurements</a> (bool flag)</td></tr>
<tr class="memdesc:af4722cd241bbe3990de91bd3a8f29138"><td class="mdescLeft">&#160;</td><td class="mdescRight">set flag to use magnetometer measurements  <a href="#af4722cd241bbe3990de91bd3a8f29138">More...</a><br /></td></tr>
<tr class="separator:af4722cd241bbe3990de91bd3a8f29138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0d9d819b5a9e7d2d4dc9ae95168c0d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#ae0d9d819b5a9e7d2d4dc9ae95168c0d2">setConfidenceForMagnetometerMeasurements</a> (double confidence)</td></tr>
<tr class="memdesc:ae0d9d819b5a9e7d2d4dc9ae95168c0d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the confidence weights on magenetometer measurements, if used  <a href="#ae0d9d819b5a9e7d2d4dc9ae95168c0d2">More...</a><br /></td></tr>
<tr class="separator:ae0d9d819b5a9e7d2d4dc9ae95168c0d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ca15476d3c86749bce4a61230e5959d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a6ca15476d3c86749bce4a61230e5959d">setGainkp</a> (double kp)</td></tr>
<tr class="memdesc:a6ca15476d3c86749bce4a61230e5959d"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the Kp gain  <a href="#a6ca15476d3c86749bce4a61230e5959d">More...</a><br /></td></tr>
<tr class="separator:a6ca15476d3c86749bce4a61230e5959d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17b6e6f323a3fc741351a68e3225a662"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a17b6e6f323a3fc741351a68e3225a662">setGainki</a> (double ki)</td></tr>
<tr class="memdesc:a17b6e6f323a3fc741351a68e3225a662"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the Ki gain  <a href="#a17b6e6f323a3fc741351a68e3225a662">More...</a><br /></td></tr>
<tr class="separator:a17b6e6f323a3fc741351a68e3225a662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae10fdac1916d45d912763443e246500"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#aae10fdac1916d45d912763443e246500">setTimeStepInSeconds</a> (double timestepInSeconds)</td></tr>
<tr class="memdesc:aae10fdac1916d45d912763443e246500"><td class="mdescLeft">&#160;</td><td class="mdescRight">set discretization time step in seconds  <a href="#aae10fdac1916d45d912763443e246500">More...</a><br /></td></tr>
<tr class="separator:aae10fdac1916d45d912763443e246500"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d04a24c139621ec0d036a18c721b02c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a2d04a24c139621ec0d036a18c721b02c">setGravityDirection</a> (const <a class="el" href="classiDynTree_1_1Direction.html">iDynTree::Direction</a> &amp;gravity_dir)</td></tr>
<tr class="memdesc:a2d04a24c139621ec0d036a18c721b02c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the gravity direction assumed by the filter (for computing orientation vectorial from accelerometer)  <a href="#a2d04a24c139621ec0d036a18c721b02c">More...</a><br /></td></tr>
<tr class="separator:a2d04a24c139621ec0d036a18c721b02c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca94c3f5d2341a11d80c03914c9372a0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#aca94c3f5d2341a11d80c03914c9372a0">setParameters</a> (const <a class="el" href="structiDynTree_1_1AttitudeMahonyFilterParameters.html">AttitudeMahonyFilterParameters</a> &amp;params)</td></tr>
<tr class="memdesc:aca94c3f5d2341a11d80c03914c9372a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set filter parameters with the struct members.  <a href="#aca94c3f5d2341a11d80c03914c9372a0">More...</a><br /></td></tr>
<tr class="separator:aca94c3f5d2341a11d80c03914c9372a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b7e9dc1d9d573bc739279c10487337a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a1b7e9dc1d9d573bc739279c10487337a">getParameters</a> (<a class="el" href="structiDynTree_1_1AttitudeMahonyFilterParameters.html">AttitudeMahonyFilterParameters</a> &amp;params)</td></tr>
<tr class="memdesc:a1b7e9dc1d9d573bc739279c10487337a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get filter parameters as a struct.  <a href="#a1b7e9dc1d9d573bc739279c10487337a">More...</a><br /></td></tr>
<tr class="separator:a1b7e9dc1d9d573bc739279c10487337a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a761c1ce98405a7bf629e1e523e3649f5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a761c1ce98405a7bf629e1e523e3649f5">updateFilterWithMeasurements</a> (const <a class="el" href="namespaceiDynTree.html#adcfa60b3d3580f517fd47c8864534b36">iDynTree::LinearAccelerometerMeasurements</a> &amp;linAccMeas, const <a class="el" href="namespaceiDynTree.html#a94dcb1f9c90a22269981469e229ed6ce">iDynTree::GyroscopeMeasurements</a> &amp;gyroMeas) override</td></tr>
<tr class="memdesc:a761c1ce98405a7bf629e1e523e3649f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the filter with accelerometer and gyroscope measurements.  <a href="#a761c1ce98405a7bf629e1e523e3649f5">More...</a><br /></td></tr>
<tr class="separator:a761c1ce98405a7bf629e1e523e3649f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa87977f5cb6afd23f73aa526dc993ade"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#aa87977f5cb6afd23f73aa526dc993ade">updateFilterWithMeasurements</a> (const <a class="el" href="namespaceiDynTree.html#adcfa60b3d3580f517fd47c8864534b36">iDynTree::LinearAccelerometerMeasurements</a> &amp;linAccMeas, const <a class="el" href="namespaceiDynTree.html#a94dcb1f9c90a22269981469e229ed6ce">iDynTree::GyroscopeMeasurements</a> &amp;gyroMeas, const <a class="el" href="namespaceiDynTree.html#ad170eb4fd0bd13bfb0bdbdb6460d28bc">iDynTree::MagnetometerMeasurements</a> &amp;magMeas) override</td></tr>
<tr class="memdesc:aa87977f5cb6afd23f73aa526dc993ade"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the filter with accelerometer, gyroscope and magnetometer measurements.  <a href="#aa87977f5cb6afd23f73aa526dc993ade">More...</a><br /></td></tr>
<tr class="separator:aa87977f5cb6afd23f73aa526dc993ade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af743b419ed9b87c50cc3d3bd87c09ce0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#af743b419ed9b87c50cc3d3bd87c09ce0">propagateStates</a> () override</td></tr>
<tr class="memdesc:af743b419ed9b87c50cc3d3bd87c09ce0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Propagate the states and associated uncertainties through properly defined propagation functions The underlying implementation depends on the type of filter being implemented.  <a href="#af743b419ed9b87c50cc3d3bd87c09ce0">More...</a><br /></td></tr>
<tr class="separator:af743b419ed9b87c50cc3d3bd87c09ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17791aee32f963e4b1117625fb19a509"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a17791aee32f963e4b1117625fb19a509">getOrientationEstimateAsRotationMatrix</a> (<a class="el" href="classiDynTree_1_1Rotation.html">iDynTree::Rotation</a> &amp;rot) override</td></tr>
<tr class="memdesc:a17791aee32f963e4b1117625fb19a509"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get orientation of the body with respect to inertial frame, in rotation matrix form If we denote \( A \) as inertial frame and \( B \) as the frame attached to the body, then this method gives us \( {^A}R_B \) as the rotation matrix.  <a href="#a17791aee32f963e4b1117625fb19a509">More...</a><br /></td></tr>
<tr class="separator:a17791aee32f963e4b1117625fb19a509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b66b4f277bb7942e82eb970550878a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a12b66b4f277bb7942e82eb970550878a">getOrientationEstimateAsQuaternion</a> (<a class="el" href="namespaceiDynTree.html#a8953e202971beb38867767ab9f002c42">iDynTree::UnitQuaternion</a> &amp;q) override</td></tr>
<tr class="memdesc:a12b66b4f277bb7942e82eb970550878a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get orientation of the body with respect to inertial frame, in unit quaternion form If we denote \( A \) as inertial frame and \( B \) as the frame attached to the body, then this method gives us \( {^A}q_B as the quaternion \).  <a href="#a12b66b4f277bb7942e82eb970550878a">More...</a><br /></td></tr>
<tr class="separator:a12b66b4f277bb7942e82eb970550878a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acae8174e86843da647341949ca29e17a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#acae8174e86843da647341949ca29e17a">getOrientationEstimateAsRPY</a> (<a class="el" href="namespaceiDynTree.html#a48e2955e462d28103d57a10634d0654d">iDynTree::RPY</a> &amp;rpy) override</td></tr>
<tr class="memdesc:acae8174e86843da647341949ca29e17a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get orientation of the body with respect to inertial frame, in Euler's RPY form If we denote \( A \) as inertial frame and \( B \) as the frame attached to the body, then this method gives us the RPY 3d vector of Euler Angles when composed together gives us \( {^A}R_B \) as the rotation matrix where \( {^A}R_B = Rot_z(yaw)Rot_y(pitch)Rot_x(roll)\).  <a href="#acae8174e86843da647341949ca29e17a">More...</a><br /></td></tr>
<tr class="separator:acae8174e86843da647341949ca29e17a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14a59acedee3a36d1cb1a57c863f6e21"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a14a59acedee3a36d1cb1a57c863f6e21">getInternalStateSize</a> () const override</td></tr>
<tr class="memdesc:a14a59acedee3a36d1cb1a57c863f6e21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get dimension of the state vector.  <a href="#a14a59acedee3a36d1cb1a57c863f6e21">More...</a><br /></td></tr>
<tr class="separator:a14a59acedee3a36d1cb1a57c863f6e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5f871007add5e65389039743a88ab71"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#ae5f871007add5e65389039743a88ab71">getInternalState</a> (const <a class="el" href="classiDynTree_1_1Span.html">iDynTree::Span</a>&lt; double &gt; &amp;stateBuffer) const override</td></tr>
<tr class="memdesc:ae5f871007add5e65389039743a88ab71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get internal state of the estimator The internal state of the estimator is described as \( X = \begin{bmatrix} {^A}q_B \\ {^B}\Omega_{A,B} \\ {^B}b \end{bmatrix}^T \) \( {^A}q_B \in \mathbb{R}^4 \) is the quaternion representing the orientation of a body(IMU) frame with respect to an inertial frame , \( {^B}\Omega_{A,B} \in \mathbb{R}^3 \) is the angular velocity of a body(IMU) frame with respect to an inertial frame, expressed in the body frame and \( {^B}b \in \mathbb{R}^3 \) is the gyroscope bias expressed in the body frame.  <a href="#ae5f871007add5e65389039743a88ab71">More...</a><br /></td></tr>
<tr class="separator:ae5f871007add5e65389039743a88ab71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af275b53472f9fa6f5f146f1f5a302bdc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#af275b53472f9fa6f5f146f1f5a302bdc">getDefaultInternalInitialState</a> (const <a class="el" href="classiDynTree_1_1Span.html">iDynTree::Span</a>&lt; double &gt; &amp;stateBuffer) const override</td></tr>
<tr class="memdesc:af275b53472f9fa6f5f146f1f5a302bdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get initial internal state of the estimator The internal state of the estimator is described as \( X = \begin{bmatrix} {^A}q_B \\ {^B}\Omega_{A,B} \\ {^B}b \end{bmatrix}^T \) \( {^A}q_B \in \mathbb{R}^4 \) is the quaternion representing the orientation of a body(IMU) frame with respect to an inertial frame , \( {^B}\Omega_{A,B} \in \mathbb{R}^3 \) is the angular velocity of a body(IMU) frame with respect to an inertial frame, expressed in the body frame and \( {^B}b \in \mathbb{R}^3 \) is the gyroscope bias expressed in the body frame.  <a href="#af275b53472f9fa6f5f146f1f5a302bdc">More...</a><br /></td></tr>
<tr class="separator:af275b53472f9fa6f5f146f1f5a302bdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a056cbfe2f712924c67609afcda054271"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a056cbfe2f712924c67609afcda054271">setInternalState</a> (const <a class="el" href="classiDynTree_1_1Span.html">iDynTree::Span</a>&lt; double &gt; &amp;stateBuffer) override</td></tr>
<tr class="memdesc:a056cbfe2f712924c67609afcda054271"><td class="mdescLeft">&#160;</td><td class="mdescRight">set internal state of the estimator.  <a href="#a056cbfe2f712924c67609afcda054271">More...</a><br /></td></tr>
<tr class="separator:a056cbfe2f712924c67609afcda054271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f0c070353e6da5b2ad7b478de1eb7dd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a9f0c070353e6da5b2ad7b478de1eb7dd">setInternalStateInitialOrientation</a> (const <a class="el" href="classiDynTree_1_1Span.html">iDynTree::Span</a>&lt; double &gt; &amp;orientationBuffer) override</td></tr>
<tr class="memdesc:a9f0c070353e6da5b2ad7b478de1eb7dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the initial orientation for the internal state of the estimator.  <a href="#a9f0c070353e6da5b2ad7b478de1eb7dd">More...</a><br /></td></tr>
<tr class="separator:a9f0c070353e6da5b2ad7b478de1eb7dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ac0fc46ec94c50c7d38a193a204acf139"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structiDynTree_1_1AttitudeMahonyFilterParameters.html">AttitudeMahonyFilterParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#ac0fc46ec94c50c7d38a193a204acf139">m_params_mahony</a></td></tr>
<tr class="memdesc:ac0fc46ec94c50c7d38a193a204acf139"><td class="mdescLeft">&#160;</td><td class="mdescRight">struct holding the Mahony filter parameters  <a href="#ac0fc46ec94c50c7d38a193a204acf139">More...</a><br /></td></tr>
<tr class="separator:ac0fc46ec94c50c7d38a193a204acf139"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab40c1b03d4acc60dcdf9dc9dcdb6c9d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structiDynTree_1_1AttitudeEstimatorState.html">AttitudeEstimatorState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#ab40c1b03d4acc60dcdf9dc9dcdb6c9d4">m_state_mahony</a></td></tr>
<tr class="separator:ab40c1b03d4acc60dcdf9dc9dcdb6c9d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07413b093183b85df04fdbcfa241cec3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structiDynTree_1_1AttitudeEstimatorState.html">AttitudeEstimatorState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a07413b093183b85df04fdbcfa241cec3">m_initial_state_mahony</a></td></tr>
<tr class="separator:a07413b093183b85df04fdbcfa241cec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>explicit passive complementary filter on quaternion groups described in the paper <a href="https://hal.archives-ouvertes.fr/hal-00488376/document">Non-linear complementary filters on SO3 groups</a> </p>
<p>The filter is used to estimate the states \( X = \begin{bmatrix} {^A}q_B \\ {^B}\Omega_{A,B} \\ {^B}b \end{bmatrix}^T \) where \( {^A}q_B \in \mathbb{R}^4 \) is the quaternion representing the orientation of a body(IMU) frame with respect to an inertial frame , \( {^B}\Omega_{A,B} \in \mathbb{R}^3 \) is the angular velocity of a body(IMU) frame with respect to an inertial frame, expressed in the body frame and \( {^B}b \in \mathbb{R}^3 \) is the gyroscope bias expressed in the body frame. </p><dl class="section note"><dt>Note</dt><dd>: we will drop the subscripts and superscripts in the rest of the documentation for convenience</dd></dl>
<p>The discretized dynamics of the filter is implemented in the <a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#af743b419ed9b87c50cc3d3bd87c09ce0" title="Propagate the states and associated uncertainties through properly defined propagation functions The ...">propagateStates()</a> method and is described by the following equations, \( q_{k+1} = q_{k} + \Delta t \frac{1}{2}q_{k} \circ \begin{bmatrix} 0 \\ \Omega_y_{k+1} - b_k + K_p \omega_{mes_{k+1}}\end{bmatrix}\) \( \Omega_{k+1} = \Omega_y_{k+1} - b_k \) \( b_{k+1} = b_k - K_i \Delta t \frac{1}{2} \omega_{mes_{k+1}} \)</p>
<p>The <a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a761c1ce98405a7bf629e1e523e3649f5" title="Update the filter with accelerometer and gyroscope measurements. ">updateFilterWithMeasurements()</a> uses the recent IMU measurements to compute the term \( \omega_{mes} \) which gives the vectorial from accelerometer and magnetometer measurements \( \omega_{mes} = -(\Sigma{n}{i=1} \frac{k_i}{2} (v_i \hat{v}_i^T - \hat{v}_i v_i^T) )^{\vee} \) where \( v_i \) is the normalized accelerometer or magnetometer measurement, \( \hat{v_i} \) is the vector obtained from the orientation estimated combined with gravity direction or absolute magnetic field direction, for e.g, \( \hat{v_acc} = {^w}R_b^T e_3 \) and \( k_i \) is the confidence weight on the i-th measurement. In our case, i = 1 or 2.</p>
<p>The usage of the attitude estimator can be as follows,</p><ul>
<li>After instantiation, the parameters of the filter can be set using the individual parameter methods or the struct method.</li>
<li>The filter state can be initialized by calling the <a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a056cbfe2f712924c67609afcda054271" title="set internal state of the estimator. ">setInternalState()</a> method</li>
<li>Once initialized, the following filter methods can be run in a loop to get the orientation estimates,<ul>
<li><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#a761c1ce98405a7bf629e1e523e3649f5" title="Update the filter with accelerometer and gyroscope measurements. ">updateFilterWithMeasurements()</a> method to pass the recent measurements to the filter</li>
<li><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#af743b419ed9b87c50cc3d3bd87c09ce0" title="Propagate the states and associated uncertainties through properly defined propagation functions The ...">propagateStates()</a> method to propagate the states through the system dynamics and correcting using the updated measurements</li>
<li><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html#ae5f871007add5e65389039743a88ab71" title="Get internal state of the estimator The internal state of the estimator is described as   is the quat...">getInternalState()</a> or getOrientationEstimate*() methods to get the entire state estimate or only the attitude estimated in desired representation </li>
</ul>
</li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae2a22d925e2bfac7f4c3f6a91a3a1871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2a22d925e2bfac7f4c3f6a91a3a1871">&#9670;&nbsp;</a></span>AttitudeMahonyFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">iDynTree::AttitudeMahonyFilter::AttitudeMahonyFilter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af4722cd241bbe3990de91bd3a8f29138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4722cd241bbe3990de91bd3a8f29138">&#9670;&nbsp;</a></span>useMagnetoMeterMeasurements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iDynTree::AttitudeMahonyFilter::useMagnetoMeterMeasurements </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set flag to use magnetometer measurements </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flag</td><td>enable/disable magnetometer measurements </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae0d9d819b5a9e7d2d4dc9ae95168c0d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0d9d819b5a9e7d2d4dc9ae95168c0d2">&#9670;&nbsp;</a></span>setConfidenceForMagnetometerMeasurements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iDynTree::AttitudeMahonyFilter::setConfidenceForMagnetometerMeasurements </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>confidence</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the confidence weights on magenetometer measurements, if used </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">confidence</td><td>can take values between \( [0, 1] \) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6ca15476d3c86749bce4a61230e5959d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ca15476d3c86749bce4a61230e5959d">&#9670;&nbsp;</a></span>setGainkp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iDynTree::AttitudeMahonyFilter::setGainkp </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>kp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the Kp gain </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">kp</td><td>gain </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a17b6e6f323a3fc741351a68e3225a662"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17b6e6f323a3fc741351a68e3225a662">&#9670;&nbsp;</a></span>setGainki()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iDynTree::AttitudeMahonyFilter::setGainki </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ki</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the Ki gain </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ki</td><td>gain </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aae10fdac1916d45d912763443e246500"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae10fdac1916d45d912763443e246500">&#9670;&nbsp;</a></span>setTimeStepInSeconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iDynTree::AttitudeMahonyFilter::setTimeStepInSeconds </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>timestepInSeconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set discretization time step in seconds </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timestepInSeconds</td><td>time step </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2d04a24c139621ec0d036a18c721b02c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d04a24c139621ec0d036a18c721b02c">&#9670;&nbsp;</a></span>setGravityDirection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iDynTree::AttitudeMahonyFilter::setGravityDirection </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classiDynTree_1_1Direction.html">iDynTree::Direction</a> &amp;&#160;</td>
          <td class="paramname"><em>gravity_dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the gravity direction assumed by the filter (for computing orientation vectorial from accelerometer) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">gravity_dir</td><td>gravity direction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aca94c3f5d2341a11d80c03914c9372a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca94c3f5d2341a11d80c03914c9372a0">&#9670;&nbsp;</a></span>setParameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iDynTree::AttitudeMahonyFilter::setParameters </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structiDynTree_1_1AttitudeMahonyFilterParameters.html">AttitudeMahonyFilterParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set filter parameters with the struct members. </p>
<p>This does not reset the internal state. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">params</td><td>object of <a class="el" href="structiDynTree_1_1AttitudeMahonyFilterParameters.html" title="set up the quaternion EKF ">AttitudeMahonyFilterParameters</a> passed as a const reference </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true/false if successful/not </dd></dl>

</div>
</div>
<a id="a1b7e9dc1d9d573bc739279c10487337a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b7e9dc1d9d573bc739279c10487337a">&#9670;&nbsp;</a></span>getParameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void iDynTree::AttitudeMahonyFilter::getParameters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structiDynTree_1_1AttitudeMahonyFilterParameters.html">AttitudeMahonyFilterParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get filter parameters as a struct. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">params</td><td>object of <a class="el" href="structiDynTree_1_1AttitudeMahonyFilterParameters.html" title="set up the quaternion EKF ">AttitudeMahonyFilterParameters</a> passed as reference </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a761c1ce98405a7bf629e1e523e3649f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a761c1ce98405a7bf629e1e523e3649f5">&#9670;&nbsp;</a></span>updateFilterWithMeasurements() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iDynTree::AttitudeMahonyFilter::updateFilterWithMeasurements </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceiDynTree.html#adcfa60b3d3580f517fd47c8864534b36">iDynTree::LinearAccelerometerMeasurements</a> &amp;&#160;</td>
          <td class="paramname"><em>linAccMeas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespaceiDynTree.html#a94dcb1f9c90a22269981469e229ed6ce">iDynTree::GyroscopeMeasurements</a> &amp;&#160;</td>
          <td class="paramname"><em>gyroMeas</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the filter with accelerometer and gyroscope measurements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">linAccMeas</td><td>proper (body acceleration - gravity) classical acceleration of the origin of the body frame B expressed in frame B </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gyroMeas</td><td>angular velocity of body frame B with respect to an inertial fram A, expressed in frame B</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>consider the current behavior of our system does not use magnetometer measurements and is calling this method to update measurements. Then, if we decide to turn the flag use_magnetometer_measurements to true, this will not guarantee that the magnetometer measurements will be used. The magnetometer measurements will be used only if we replace this function call with the other overlaoded function considering the magnetometer measurements.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true/false if successful/not </dd></dl>

<p>Implements <a class="el" href="classiDynTree_1_1IAttitudeEstimator.html#a9c251ac717cbcfeb75a39fffd5a9b185">iDynTree::IAttitudeEstimator</a>.</p>

</div>
</div>
<a id="aa87977f5cb6afd23f73aa526dc993ade"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa87977f5cb6afd23f73aa526dc993ade">&#9670;&nbsp;</a></span>updateFilterWithMeasurements() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iDynTree::AttitudeMahonyFilter::updateFilterWithMeasurements </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceiDynTree.html#adcfa60b3d3580f517fd47c8864534b36">iDynTree::LinearAccelerometerMeasurements</a> &amp;&#160;</td>
          <td class="paramname"><em>linAccMeas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespaceiDynTree.html#a94dcb1f9c90a22269981469e229ed6ce">iDynTree::GyroscopeMeasurements</a> &amp;&#160;</td>
          <td class="paramname"><em>gyroMeas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespaceiDynTree.html#ad170eb4fd0bd13bfb0bdbdb6460d28bc">iDynTree::MagnetometerMeasurements</a> &amp;&#160;</td>
          <td class="paramname"><em>magMeas</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the filter with accelerometer, gyroscope and magnetometer measurements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">linAccMeas</td><td>proper (body acceleration - gravity) classical acceleration of the origin of the body frame B expressed in frame B </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gyroMeas</td><td>angular velocity of body frame B with respect to an inertial fram A, expressed in frame B </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">magMeas</td><td>magnetometer measurements expressed in frame B</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true/false if successful/not </dd></dl>

<p>Implements <a class="el" href="classiDynTree_1_1IAttitudeEstimator.html#a7121acf85b46be0edb9231588c579013">iDynTree::IAttitudeEstimator</a>.</p>

</div>
</div>
<a id="af743b419ed9b87c50cc3d3bd87c09ce0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af743b419ed9b87c50cc3d3bd87c09ce0">&#9670;&nbsp;</a></span>propagateStates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iDynTree::AttitudeMahonyFilter::propagateStates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Propagate the states and associated uncertainties through properly defined propagation functions The underlying implementation depends on the type of filter being implemented. </p>
<dl class="section return"><dt>Returns</dt><dd>true/false if successful/not </dd></dl>

<p>Implements <a class="el" href="classiDynTree_1_1IAttitudeEstimator.html#a6cc4ea7bacb721c67890ceb250857e71">iDynTree::IAttitudeEstimator</a>.</p>

</div>
</div>
<a id="a17791aee32f963e4b1117625fb19a509"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17791aee32f963e4b1117625fb19a509">&#9670;&nbsp;</a></span>getOrientationEstimateAsRotationMatrix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iDynTree::AttitudeMahonyFilter::getOrientationEstimateAsRotationMatrix </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classiDynTree_1_1Rotation.html">iDynTree::Rotation</a> &amp;&#160;</td>
          <td class="paramname"><em>rot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get orientation of the body with respect to inertial frame, in rotation matrix form If we denote \( A \) as inertial frame and \( B \) as the frame attached to the body, then this method gives us \( {^A}R_B \) as the rotation matrix. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">rot</td><td><a class="el" href="classiDynTree_1_1Rotation.html" title="Class representation the rotation of an orientation frame with respect to a reference orientation fra...">Rotation</a> matrix </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true/false if successful/not </dd></dl>

<p>Implements <a class="el" href="classiDynTree_1_1IAttitudeEstimator.html#a3fd8541c4ede713177058251aae24717">iDynTree::IAttitudeEstimator</a>.</p>

</div>
</div>
<a id="a12b66b4f277bb7942e82eb970550878a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12b66b4f277bb7942e82eb970550878a">&#9670;&nbsp;</a></span>getOrientationEstimateAsQuaternion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iDynTree::AttitudeMahonyFilter::getOrientationEstimateAsQuaternion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceiDynTree.html#a8953e202971beb38867767ab9f002c42">iDynTree::UnitQuaternion</a> &amp;&#160;</td>
          <td class="paramname"><em>q</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get orientation of the body with respect to inertial frame, in unit quaternion form If we denote \( A \) as inertial frame and \( B \) as the frame attached to the body, then this method gives us \( {^A}q_B as the quaternion \). </p>
<dl class="section note"><dt>Note</dt><dd>quaternion has the form (real, imaginary) and is normalized </dd>
<dd>
Usually a rotation matrix can be described using two quaternions due to its double-connectedness property Depending on the specific filter, the initial state and the trajectory of the system, we could obtain one quaternion or the other(opposite spin), depending on the system dynamics.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">q</td><td>UnitQuaternion </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true/false if successful/not </dd></dl>

<p>Implements <a class="el" href="classiDynTree_1_1IAttitudeEstimator.html#a72f94711e28d7173869f41492d6ac364">iDynTree::IAttitudeEstimator</a>.</p>

</div>
</div>
<a id="acae8174e86843da647341949ca29e17a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acae8174e86843da647341949ca29e17a">&#9670;&nbsp;</a></span>getOrientationEstimateAsRPY()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iDynTree::AttitudeMahonyFilter::getOrientationEstimateAsRPY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceiDynTree.html#a48e2955e462d28103d57a10634d0654d">iDynTree::RPY</a> &amp;&#160;</td>
          <td class="paramname"><em>rpy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get orientation of the body with respect to inertial frame, in Euler's RPY form If we denote \( A \) as inertial frame and \( B \) as the frame attached to the body, then this method gives us the RPY 3d vector of Euler Angles when composed together gives us \( {^A}R_B \) as the rotation matrix where \( {^A}R_B = Rot_z(yaw)Rot_y(pitch)Rot_x(roll)\). </p>
<p>For more details about the range of the RPY Euler angles, please refer the documentation of <a href="https://github.com/robotology/idyntree/blob/c8bf721b771fa4b1e7c3a940632e121060719a19/src/core/include/iDynTree/Core/Rotation.h#L167">GetRPY()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">rpy</td><td>3D vector containing roll pitch yaw angles </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true/false if successful/not </dd></dl>

<p>Implements <a class="el" href="classiDynTree_1_1IAttitudeEstimator.html#add5b1c7109a232bcb3da976792f72a6f">iDynTree::IAttitudeEstimator</a>.</p>

</div>
</div>
<a id="a14a59acedee3a36d1cb1a57c863f6e21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14a59acedee3a36d1cb1a57c863f6e21">&#9670;&nbsp;</a></span>getInternalStateSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t iDynTree::AttitudeMahonyFilter::getInternalStateSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get dimension of the state vector. </p>
<dl class="section return"><dt>Returns</dt><dd>size_t size of state vector </dd></dl>

<p>Implements <a class="el" href="classiDynTree_1_1IAttitudeEstimator.html#a7234eb151268d99d90dbe691a6bf3a46">iDynTree::IAttitudeEstimator</a>.</p>

</div>
</div>
<a id="ae5f871007add5e65389039743a88ab71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5f871007add5e65389039743a88ab71">&#9670;&nbsp;</a></span>getInternalState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iDynTree::AttitudeMahonyFilter::getInternalState </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classiDynTree_1_1Span.html">iDynTree::Span</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>stateBuffer</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get internal state of the estimator The internal state of the estimator is described as \( X = \begin{bmatrix} {^A}q_B \\ {^B}\Omega_{A,B} \\ {^B}b \end{bmatrix}^T \) \( {^A}q_B \in \mathbb{R}^4 \) is the quaternion representing the orientation of a body(IMU) frame with respect to an inertial frame , \( {^B}\Omega_{A,B} \in \mathbb{R}^3 \) is the angular velocity of a body(IMU) frame with respect to an inertial frame, expressed in the body frame and \( {^B}b \in \mathbb{R}^3 \) is the gyroscope bias expressed in the body frame. </p>
<p>The default internal state of the estimator would be \( X = \begin{bmatrix} 1.0 \\ 0_{1 \times 3} \\ 0_{1 \times 3} \\ 0_{1 \times 3} \end{bmatrix}^T \) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">stateBuffer</td><td><a class="el" href="classiDynTree_1_1Span.html">Span</a> object as reference of the container where state vector should be copied to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true/false if successful/not </dd></dl>

<p>Implements <a class="el" href="classiDynTree_1_1IAttitudeEstimator.html#a0360685bed94e086224b1126116dca04">iDynTree::IAttitudeEstimator</a>.</p>

</div>
</div>
<a id="af275b53472f9fa6f5f146f1f5a302bdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af275b53472f9fa6f5f146f1f5a302bdc">&#9670;&nbsp;</a></span>getDefaultInternalInitialState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iDynTree::AttitudeMahonyFilter::getDefaultInternalInitialState </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classiDynTree_1_1Span.html">iDynTree::Span</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>stateBuffer</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get initial internal state of the estimator The internal state of the estimator is described as \( X = \begin{bmatrix} {^A}q_B \\ {^B}\Omega_{A,B} \\ {^B}b \end{bmatrix}^T \) \( {^A}q_B \in \mathbb{R}^4 \) is the quaternion representing the orientation of a body(IMU) frame with respect to an inertial frame , \( {^B}\Omega_{A,B} \in \mathbb{R}^3 \) is the angular velocity of a body(IMU) frame with respect to an inertial frame, expressed in the body frame and \( {^B}b \in \mathbb{R}^3 \) is the gyroscope bias expressed in the body frame. </p>
<p>The default internal state of the estimator would be \( X = \begin{bmatrix} 1.0 \\ 0_{1 \times 3} \\ 0_{1 \times 3} \\ 0_{1 \times 3} \end{bmatrix}^T \) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">stateBuffer</td><td><a class="el" href="classiDynTree_1_1Span.html">Span</a> object as reference of the container where state vector should be copied to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true/false if successful/not </dd></dl>

<p>Implements <a class="el" href="classiDynTree_1_1IAttitudeEstimator.html#a86554ddcfc70601b05ad7cd997851983">iDynTree::IAttitudeEstimator</a>.</p>

</div>
</div>
<a id="a056cbfe2f712924c67609afcda054271"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a056cbfe2f712924c67609afcda054271">&#9670;&nbsp;</a></span>setInternalState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iDynTree::AttitudeMahonyFilter::setInternalState </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classiDynTree_1_1Span.html">iDynTree::Span</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>stateBuffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set internal state of the estimator. </p>
<p>The internal state of the estimator is described as \( X = \begin{bmatrix} {^A}q_B \\ {^B}\Omega_{A,B} \\ {^B}b \end{bmatrix}^T \) \( {^A}q_B \in \mathbb{R}^4 \) is the quaternion representing the orientation of a body(IMU) frame with respect to an inertial frame , \( {^B}\Omega_{A,B} \in \mathbb{R}^3 \) is the angular velocity of a body(IMU) frame with respect to an inertial frame, expressed in the body frame and \( {^B}b \in \mathbb{R}^3 \) is the gyroscope bias expressed in the body frame. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stateBuffer</td><td><a class="el" href="classiDynTree_1_1Span.html">Span</a> object as reference of the container from which the internal state vector should be assigned. The size of the buffer should be 10. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true/false if successful/not </dd></dl>

<p>Implements <a class="el" href="classiDynTree_1_1IAttitudeEstimator.html#a4277465fc6cacfa0fa0ccd1d1c863954">iDynTree::IAttitudeEstimator</a>.</p>

</div>
</div>
<a id="a9f0c070353e6da5b2ad7b478de1eb7dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f0c070353e6da5b2ad7b478de1eb7dd">&#9670;&nbsp;</a></span>setInternalStateInitialOrientation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool iDynTree::AttitudeMahonyFilter::setInternalStateInitialOrientation </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classiDynTree_1_1Span.html">iDynTree::Span</a>&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>orientationBuffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set the initial orientation for the internal state of the estimator. </p>
<p>The initial orientation for the internal state of the estimator is described as \( {^A}q_B \) \( {^A}q_B \in \mathbb{R}^4 \) is the quaternion representing the orientation of a body(IMU) frame with respect to an inertial frame , </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stateBuffer</td><td><a class="el" href="classiDynTree_1_1Span.html">Span</a> object as reference of the container from which the inital orientaiton for internal state vector should be assigned. The size of the buffer should be 4. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true/false if successful/not </dd></dl>

<p>Implements <a class="el" href="classiDynTree_1_1IAttitudeEstimator.html#a8ca76def98fa0bd37975788dc7e1c0c5">iDynTree::IAttitudeEstimator</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac0fc46ec94c50c7d38a193a204acf139"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0fc46ec94c50c7d38a193a204acf139">&#9670;&nbsp;</a></span>m_params_mahony</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structiDynTree_1_1AttitudeMahonyFilterParameters.html">AttitudeMahonyFilterParameters</a> iDynTree::AttitudeMahonyFilter::m_params_mahony</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>struct holding the Mahony filter parameters </p>

</div>
</div>
<a id="ab40c1b03d4acc60dcdf9dc9dcdb6c9d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab40c1b03d4acc60dcdf9dc9dcdb6c9d4">&#9670;&nbsp;</a></span>m_state_mahony</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structiDynTree_1_1AttitudeEstimatorState.html">AttitudeEstimatorState</a> iDynTree::AttitudeMahonyFilter::m_state_mahony</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a07413b093183b85df04fdbcfa241cec3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07413b093183b85df04fdbcfa241cec3">&#9670;&nbsp;</a></span>m_initial_state_mahony</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structiDynTree_1_1AttitudeEstimatorState.html">AttitudeEstimatorState</a> iDynTree::AttitudeMahonyFilter::m_initial_state_mahony</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="AttitudeMahonyFilter_8h.html">AttitudeMahonyFilter.h</a></li>
<li><a class="el" href="AttitudeMahonyFilter_8cpp.html">AttitudeMahonyFilter.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceiDynTree.html">iDynTree</a></li><li class="navelem"><a class="el" href="classiDynTree_1_1AttitudeMahonyFilter.html">AttitudeMahonyFilter</a></li>
    <li class="footer">Generated on Fri Jan 10 2020 08:54:56 for iDynTree by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
